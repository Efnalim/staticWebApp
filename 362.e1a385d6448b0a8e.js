"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[362],{5362:(J,p,o)=>{o.r(p),o.d(p,{StatisticsModule:()=>j});var d=o(6814),f=o(8109),h=o(5861),C=o(4036),M=o(7621),t=o(5879),S=o(2042),v=o(7949),O=o(9014),P=o(2296),l=o(5195),y=o(6385),T=o(617),u=o(7988);function Z(n,a){if(1&n&&(t.TgZ(0,"a",9)(1,"mat-icon",10),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=a.$implicit;t.s9C("href",e.url,t.LSH),t.uIk("target",e.openNewTab?"_blank":null),t.xp6(1),t.s9C("matBadge",e.newFeature?"\u2605":null),t.xp6(1),t.Oqu(e.icon),t.xp6(1),t.hij(" ",e.title," ")}}function F(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}const x=function(n){return{"background-color":n}};function A(n,a){if(1&n&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit,r=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,x,r.getBackgroundColor(e.performer))),t.xp6(1),t.hij(" ",r.getDate(e.date),"")}}function B(n,a){if(1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"strong"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content",11),t.YNc(5,A,2,4,"div",12),t.qZA()()),2&n){const e=a.$implicit;t.xp6(3),t.Oqu(e.year),t.xp6(2),t.Q6J("ngForOf",e.records)}}const I=[{path:"",component:(()=>{class n{constructor(e,r){this.menuService=e,this.songService=r,this.title="Statistika",this.worshipSongsPerformers=M.jC,this.menuItems=[],this.records=[]}ngOnInit(){localStorage.setItem("statistics","seen"),this.menuItems=this.menuService.getMenuItems().filter(e=>e.title!==this.title),this.fetachAndProcesSongs()}fetachAndProcesSongs(){var e=this;return(0,h.Z)(function*(){const r=yield(0,C.z)(e.songService.getAllSongs());let g=new Map;r.forEach(s=>{s.records.forEach(i=>{const c=e.normalizeDate(i.date);g.has(c.getTime())||g.set(c.getTime(),i)})});let m=[];g.forEach(s=>{let i=s.date.getFullYear(),c=m.find(D=>i===D.year);c?c.records.push(s):m.push({year:i,records:[s]})}),m.forEach(s=>s.records.sort((i,c)=>c.date.getTime()-i.date.getTime())),e.records=m})()}itemHasNewFeature(e){return e.newFeature}normalizeDate(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}getDate(e){return e.getDate()+"."+(e.getMonth()+1)+"."}getBackgroundColor(e){switch(e){case"OG":return"rgb(53, 122, 195)";case"NG":return"rgb(240, 211, 51)";case"MIX":return"rgb(50, 168, 78)";case"ml\xe1de\u017e":return"tomato";default:return"rgb(156, 155, 155)"}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.h),t.Y36(v.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistics"]],decls:17,vars:6,consts:[[1,"example-card"],[2,"justify-content","space-between"],["mat-icon-button","","aria-label","Example icon-button with a menu","matBadgePosition","before",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",3,"href",4,"ngFor","ngForOf"],[2,"margin-top","0.5rem"],[2,"padding-top","16px","flex-grow","1","display","flex","flex-direction","column"],[1,"legend"],[4,"ngFor","ngForOf"],["mat-menu-item","",3,"href"],["matBadgePosition","before",3,"matBadge"],[1,"recordInYear"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"menu"),t.qZA()(),t.TgZ(7,"mat-menu",null,3),t.YNc(9,Z,4,5,"a",4),t.qZA()(),t._UZ(10,"mat-divider",5),t.TgZ(11,"mat-card-content",6)(12,"legend",7),t.YNc(13,F,2,1,"span",8),t.TgZ(14,"span"),t._uU(15,"neuvedeno"),t.qZA()(),t.YNc(16,B,6,2,"mat-card",8),t.qZA()()),2&e){const g=t.MAs(8);t.xp6(3),t.hij(" ",r.title," "),t.xp6(1),t.s9C("matBadge",r.menuItems.some(r.itemHasNewFeature)?"\u2605":null),t.Q6J("matMenuTriggerFor",g),t.xp6(5),t.Q6J("ngForOf",r.menuItems),t.xp6(4),t.Q6J("ngForOf",r.worshipSongsPerformers),t.xp6(3),t.Q6J("ngForOf",r.records)}},dependencies:[d.sg,d.PC,O.k,P.RK,l.a8,l.dn,l.dk,l.n5,y.d,T.Hw,u.VK,u.OP,u.p6],styles:[".container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{max-width:100vw}.legend[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly}.legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px;border-radius:4px;margin-bottom:.5rem}.legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){background-color:#357ac3}.legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background-color:#f0d333}.legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background-color:#32a84e}.legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background-color:tomato}.legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background-color:#9c9b9b}.recordInYear[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr)}.recordInYear[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:2px;text-align:center;border-radius:4px}"]}),n})()}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(I),f.Bz]}),n})();var U=o(8524);let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,U.m,Y]}),n})()}}]);